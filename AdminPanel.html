<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</title>
    <link rel="stylesheet" href="AdminPanel.css">
</head>
<body>
<!-- –ß–µ—Ä–¥–∞–∫ -->
    <div class="header-box">
        <div class="header-container">
            <a class="logo-container" href="Main.html" style="text-decoration: none; color: inherit;">
                <img src="media/logo.png" class="logo">
                <h1 class="title">–ö–æ—Ä–æ—á–∫–∏.–µ—Å—Ç—å</h1>
                <h3 class="undertitle">–¢–æ–ª—å–∫–æ "–ù–µ" –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–±—Ä–æ–∑–æ–≤–∞–Ω–∏–µ.</h3>
            </a>
            <div class="buttons">
                <div id="authSection" style="display: none;">
                    <span id="userGreeting" style="margin-right: 15px; color: #333;"></span>
                    
                </div>
                <div id="unauthSection">
                </div>
                <a href="ApplicationReviewPage.html" class="btn1">–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞—è–≤–æ–∫.</a>
                <a href="RequestFormationPage.html" class="btn2">–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞—è–≤–∫–∏.</a>
                <button id="logoutBtn" class="btn-logout">–í—ã–π—Ç–∏</button>
            </div>
        </div>
    </div>

<!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="main-container">
           <div class="somthing-container">
    </div>
    <div id="loginForm" class="login-form">
            <h2>–í—Ö–æ–¥ –≤ –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h2>
            <input type="text" id="username" placeholder="–õ–æ–≥–∏–Ω" required>
            <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å" required>
            <button onclick="login()">–í–æ–π—Ç–∏</button>
            <div id="loginError" style="color: red; text-align: center; margin-top: 10px;"></div>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -->
        <div id="adminPanel" class="hidden">
            <div class="admin-header">
                <h2 class="t1">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h2>
                <button class="logout-btn" onclick="logout()">–í—ã–π—Ç–∏</button>
            </div>
            
            <div class="somthing-container">
                <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏</h3>
            </div>
            
            <table class="applications-table">
                <thead>
                    <tr>
                        <th data-sort="name" onclick="changeSort('name')" style="cursor: pointer;">
                            –§–ò–û 
                            <span class="sort-indicator">‚Üï</span>
                        </th>
                        <th data-sort="email" onclick="changeSort('email')" style="cursor: pointer;">
                            Email 
                            <span class="sort-indicator">‚Üï</span>
                        </th>
                        <th data-sort="course" onclick="changeSort('course')" style="cursor: pointer;">
                            –ü—Ä–æ–≥—Ä–∞–º–º–∞ 
                            <span class="sort-indicator">‚Üï</span>
                        </th>
                        <th data-sort="date" onclick="changeSort('date')" style="cursor: pointer;">
                            –î–∞—Ç–∞ –ø–æ–¥–∞—á–∏ 
                            <span class="sort-indicator">‚Üï</span>
                        </th>
                        <th data-sort="status" onclick="changeSort('status')" style="cursor: pointer;">
                            –°—Ç–∞—Ç—É—Å 
                            <span class="sort-indicator">‚Üï</span>
                        </th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody id="applicationsTableBody">
                    <!-- –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                </tbody>
            </table>

            <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
            <div id="pagination" class="pagination hidden">
                <button id="firstPage" class="pagination-btn" onclick="goToPage(1)">–ü–µ—Ä–≤–∞—è</button>
                <button id="prevPage" class="pagination-btn" onclick="goToPage(currentPage - 1)">–ù–∞–∑–∞–¥</button>
                
                <div id="pageNumbers" class="page-numbers">
                    <!-- –ù–æ–º–µ—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü –±—É–¥—É—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
                
                <button id="nextPage" class="pagination-btn" onclick="goToPage(currentPage + 1)">–í–ø–µ—Ä–µ–¥</button>
                <button id="lastPage" class="pagination-btn" onclick="goToPage(totalPages)">–ü–æ—Å–ª–µ–¥–Ω—è—è</button>
                
                <div class="pagination-info">
                    –°—Ç—Ä–∞–Ω–∏—Ü–∞ <span id="currentPage">1</span> –∏–∑ <span id="totalPages">1</span>
                    (<span id="totalItems">0</span> –∑–∞—è–≤–æ–∫)
                </div>
            </div>
        </div>
    </div>
<!-- –ü–æ–¥–≤–∞–ª -->
    <div class="footer-box">
        <div class="footer-container">
            <a class="logo-container" href="Main.html" style="text-decoration: none; color: inherit;">
                <img src="media/logo.png" class="logo">
                <h1 class="title">–ö–æ—Ä–æ—á–∫–∏.–µ—Å—Ç—å</h1>
                <h3 class="undertitle">–¢–æ–ª—å–∫–æ "–ù–µ" –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–±—Ä–æ–∑–æ–≤–∞–Ω–∏–µ.</h3>
            </a>
            <div class="footer-columns">
                <div class="footer-column">
                    <li>–°—Ç—Ä–∞–Ω–∏—Ü—ã</li>
                    <ul>
                        <li><a href="Main.html" style="text-decoration: none; color: inherit;">–ì–ª–∞–≤–Ω–∞—è</a></li>
                        <li><a href="ApplicationReviewPage.html" style="text-decoration: none; color: inherit;">–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞—è–≤–æ–∫</a></li>
                        <li><a href="RequestFormationPage.html" style="text-decoration: none; color: inherit;">–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞—è–≤–∫–∏</a></li>
                        <li><a href="AdminPanel.html" style="text-decoration: none; color: inherit;">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <li>–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</li>
                    <ul>
                        <li><a href="#" style="text-decoration: none; color: inherit;">–£—Å–ª–æ–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</a></li>
                        <li><a href="#" style="text-decoration: none; color: inherit;">–£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</a></li>
                        <li><a href="#" style="text-decoration: none; color: inherit;">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫—É–∫–∏</a></li>
                        <li><a href="#" style="text-decoration: none; color: inherit;">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a></li>
                        <li><a href="#" style="text-decoration: none; color: inherit;">–û –Ω–∞—Å</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentAdmin = null;
        const API_BASE_URL = 'http://localhost:3006';
        
        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
        let currentPage = 1;
        let itemsPerPage = 10;
        let totalPages = 1;
        let totalItems = 0;
        let allApplications = [];
        let currentSort = { field: 'status', direction: 'asc' };

        async function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const errorDiv = document.getElementById('loginError');
            
            try {
                const response = await fetch(`${API_BASE_URL}/admin-auth`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        email: username,
                        password: password
                    })
                });

                const result = await response.json();

                if (result.success) {
                    currentAdmin = result.user;
                    document.getElementById('loginForm').classList.add('hidden');
                    document.getElementById('adminPanel').classList.remove('hidden');
                    await loadApplications();
                } else {
                    errorDiv.textContent = result.message;
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:', error);
                errorDiv.textContent = '–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3006.';
            }
        }

        function logout() {
            currentAdmin = null;
            document.getElementById('loginForm').classList.remove('hidden');
            document.getElementById('adminPanel').classList.add('hidden');
            document.getElementById('pagination').classList.add('hidden');
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            document.getElementById('loginError').textContent = '';
            currentPage = 1;
        }

        // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞—è–≤–æ–∫ —Å —Å–µ—Ä–≤–µ—Ä–∞
        async function loadApplications() {
            try {
                console.log('üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞—è–≤–æ–∫...');
                const response = await fetch(`${API_BASE_URL}/admin-applications`);
                const result = await response.json();

                if (result.success) {
                    console.log('‚úÖ –ó–∞—è–≤–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã:', result.applications.length);
                    allApplications = sortApplications(result.applications);
                    totalItems = allApplications.length;
                    totalPages = Math.ceil(totalItems / itemsPerPage);
                    
                    if (totalItems > 0) {
                        document.getElementById('pagination').classList.remove('hidden');
                    } else {
                        document.getElementById('pagination').classList.add('hidden');
                    }
                    
                    displayApplicationsForCurrentPage();
                    updatePagination();
                    updateSortIndicators();
                } else {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∑–∞—è–≤–æ–∫:', result.message);
                    showError('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∑–∞—è–≤–æ–∫');
                }
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∑–∞—è–≤–æ–∫:', error);
                showError('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∑–∞—è–≤–æ–∫
        function sortApplications(applications) {
            return applications.sort((a, b) => {
                let valueA, valueB;
                
                switch (currentSort.field) {
                    case 'status':
                        valueA = getStatusOrder(a.status);
                        valueB = getStatusOrder(b.status);
                        break;
                    case 'name':
                        valueA = `${a.user_name} ${a.user_surname}`.toLowerCase();
                        valueB = `${b.user_name} ${b.user_surname}`.toLowerCase();
                        break;
                    case 'email':
                        valueA = a.user_email.toLowerCase();
                        valueB = b.user_email.toLowerCase();
                        break;
                    case 'course':
                        valueA = a.course_name.toLowerCase();
                        valueB = b.course_name.toLowerCase();
                        break;
                    case 'date':
                        valueA = new Date(a.created_at);
                        valueB = new Date(b.created_at);
                        break;
                    default:
                        valueA = a[currentSort.field];
                        valueB = b[currentSort.field];
                }
                
                if (currentSort.direction === 'asc') {
                    return valueA < valueB ? -1 : valueA > valueB ? 1 : 0;
                } else {
                    return valueA > valueB ? -1 : valueA < valueB ? 1 : 0;
                }
            });
        }

        // –ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —Å—Ç–∞—Ç—É—Å–æ–≤
        function getStatusOrder(status) {
            const statusOrder = {
                'new': 1,
                'in_progress': 2,
                'completed': 3
            };
            return statusOrder[status] || 4;
        }

        // –§—É–Ω–∫—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
        function changeSort(field) {
            if (currentSort.field === field) {
                currentSort.direction = currentSort.direction === 'asc' ? 'desc' : 'asc';
            } else {
                currentSort.field = field;
                currentSort.direction = 'asc';
            }
            
            allApplications = sortApplications(allApplications);
            displayApplicationsForCurrentPage();
            updateSortIndicators();
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ
        function updateSortIndicators() {
            document.querySelectorAll('th').forEach(th => {
                th.classList.remove('sort-asc', 'sort-desc');
            });
            
            const activeTh = document.querySelector(`th[data-sort="${currentSort.field}"]`);
            if (activeTh) {
                activeTh.classList.add(`sort-${currentSort.direction}`);
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞—è–≤–æ–∫ –¥–ª—è —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        function displayApplicationsForCurrentPage() {
            const tableBody = document.getElementById('applicationsTableBody');
            tableBody.innerHTML = '';

            if (allApplications.length === 0) {
                const emptyRow = document.createElement('tr');
                emptyRow.innerHTML = '<td colspan="6" style="text-align: center; padding: 20px;">–ù–µ—Ç –∑–∞—è–≤–æ–∫ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</td>';
                tableBody.appendChild(emptyRow);
                return;
            }

            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = Math.min(startIndex + itemsPerPage, totalItems);
            const currentPageApplications = allApplications.slice(startIndex, endIndex);

            const groupedApplications = {
                'new': currentPageApplications.filter(app => app.status === 'new'),
                'in_progress': currentPageApplications.filter(app => app.status === 'in_progress'),
                'completed': currentPageApplications.filter(app => app.status === 'completed')
            };

            Object.keys(groupedApplications).forEach(status => {
                const statusApplications = groupedApplications[status];
                
                if (statusApplications.length > 0) {
                    const groupHeader = document.createElement('tr');
                    groupHeader.className = 'status-group-header';
                    groupHeader.innerHTML = `
                        <td colspan="6" class="group-header">
                            <strong>${getStatusDisplayName(status)}</strong>
                            <span class="group-count">(${statusApplications.length} –∑–∞—è–≤–æ–∫)</span>
                        </td>
                    `;
                    tableBody.appendChild(groupHeader);

                    statusApplications.forEach((app) => {
                        const row = document.createElement('tr');
                        row.className = `application-row status-${app.status}`;
                        
                        const statusClass = getStatusClass(app.status);
                        const statusDisplayName = getStatusDisplayName(app.status);
                        
                        row.innerHTML = `
                            <td>${app.user_name} ${app.user_surname}</td>
                            <td>${app.user_email}</td>
                            <td>${app.course_name}</td>
                            <td>${new Date(app.created_at).toLocaleDateString('ru-RU')}</td>
                            <td><span class="status-badge ${statusClass}">${statusDisplayName}</span></td>
                            <td class="actions-cell">
                                ${app.status === 'new' ? 
                                    `<button class="action-btn start-btn" onclick="changeStatus(${app.application_id}, 'in_progress')">–ù–∞—á–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ</button>` : 
                                    ''}
                                ${app.status === 'in_progress' ? 
                                    `<button class="action-btn complete-btn" onclick="changeStatus(${app.application_id}, 'completed')">–ó–∞–≤–µ—Ä—à–∏—Ç—å –æ–±—É—á–µ–Ω–∏–µ</button>` : 
                                    ''}
                                ${app.status === 'completed' ? 
                                    `<span class="completed-text">–û–±—É—á–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ</span>` : 
                                    ''}
                                ${app.status !== 'completed' ? 
                                    `<button class="action-btn cancel-btn" onclick="changeStatus(${app.application_id}, 'new')">–í–µ—Ä–Ω—É—Ç—å –≤ –Ω–æ–≤—ã–µ</button>` : 
                                    ''}
                            </td>
                        `;
                        
                        tableBody.appendChild(row);
                    });
                }
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
        function updatePagination() {
            document.getElementById('currentPage').textContent = currentPage;
            document.getElementById('totalPages').textContent = totalPages;
            document.getElementById('totalItems').textContent = totalItems;

            document.getElementById('firstPage').disabled = currentPage === 1;
            document.getElementById('prevPage').disabled = currentPage === 1;
            document.getElementById('nextPage').disabled = currentPage === totalPages;
            document.getElementById('lastPage').disabled = currentPage === totalPages;

            const pageNumbersContainer = document.getElementById('pageNumbers');
            pageNumbersContainer.innerHTML = '';

            const maxVisiblePages = 5;
            let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
            let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);

            if (endPage - startPage + 1 < maxVisiblePages) {
                startPage = Math.max(1, endPage - maxVisiblePages + 1);
            }

            if (startPage > 1) {
                addPageNumber(1);
                if (startPage > 2) {
                    addEllipsis();
                }
            }

            for (let i = startPage; i <= endPage; i++) {
                addPageNumber(i);
            }

            if (endPage < totalPages) {
                if (endPage < totalPages - 1) {
                    addEllipsis();
                }
                addPageNumber(totalPages);
            }

            function addPageNumber(page) {
                const pageBtn = document.createElement('button');
                pageBtn.className = `pagination-btn ${page === currentPage ? 'active' : ''}`;
                pageBtn.textContent = page;
                pageBtn.onclick = () => goToPage(page);
                pageNumbersContainer.appendChild(pageBtn);
            }

            function addEllipsis() {
                const ellipsis = document.createElement('span');
                ellipsis.className = 'pagination-ellipsis';
                ellipsis.textContent = '...';
                pageNumbersContainer.appendChild(ellipsis);
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
        function goToPage(page) {
            if (page < 1 || page > totalPages || page === currentPage) {
                return;
            }
            
            currentPage = page;
            displayApplicationsForCurrentPage();
            updatePagination();
            
            document.querySelector('.applications-table').scrollIntoView({ 
                behavior: 'smooth' 
            });
        }

        async function changeStatus(applicationId, newStatus) {
            if (!currentAdmin) {
                alert('–û—à–∏–±–∫–∞: –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω');
                return;
            }

            try {
                console.log(`üîÑ –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞—è–≤–∫–∏ ${applicationId} –Ω–∞ ${newStatus}`);
                
                const response = await fetch(`${API_BASE_URL}/admin-applications/${applicationId}/status`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        newStatus: newStatus,
                        adminId: currentAdmin.user_id || 0
                    })
                });

                const result = await response.json();

                if (result.success) {
                    console.log('‚úÖ –°—Ç–∞—Ç—É—Å —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –∑–∞—è–≤–∫–∏...');
                    await loadApplications();
                } else {
                    alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞: ' + result.message);
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞:', error);
                alert('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
            }
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function getStatusClass(status) {
            switch(status) {
                case 'new': return 'status-new';
                case 'in_progress': return 'status-in-progress';
                case 'completed': return 'status-completed';
                default: return '';
            }
        }

        function getStatusDisplayName(status) {
            switch(status) {
                case 'new': return '–ù–æ–≤–∞—è';
                case 'in_progress': return '–í –æ–±—É—á–µ–Ω–∏–∏';
                case 'completed': return '–ó–∞–≤–µ—Ä—à–µ–Ω–æ';
                default: return status;
            }
        }

        function showError(message) {
            const tableBody = document.getElementById('applicationsTableBody');
            tableBody.innerHTML = `
                <tr>
                    <td colspan="6" style="text-align: center; padding: 20px; color: red;">
                        ${message}
                    </td>
                </tr>
            `;
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏...');
            document.getElementById('loginForm').classList.remove('hidden');
            document.getElementById('adminPanel').classList.add('hidden');
            document.getElementById('pagination').classList.add('hidden');
        });
    </script>
</body>
</html>